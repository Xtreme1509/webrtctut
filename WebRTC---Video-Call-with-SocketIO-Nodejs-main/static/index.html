<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="/assets/logo.png" type="image/png" />
    <title>Video Call</title>
    <link rel="stylesheet" href="/assets/call.css">

    <script src='/socket.io/socket.io.js'></script>
    <style>

    </style>

    
</head>

<body>
    <div class="main_wrapper">

        <!-- to input username and login -->
        <div id="userName" class="usernamebox" style="border:0px solid red">

            <input placeholder="What should we call you?" type="text" name="" class="txtinput" id="userNameInput">

            <button onclick="login()" class="loginbutton">Login</button>

        </div>

        <!-- to display current login user information  -->
        <div id="userInfo" class="userinfo">
            <div style="float: right;">
                <h1 class="usernametitle">Hello, <span id="nameHere"></span></h1>
            </div>
            <div class="clear"></div>
            <!-- to make a call with name -->
            <div id="call" class="callbox">
                <div class="">
                    <input placeholder="Caller Name" class="txtinput" type="text" name="callName" id="callName">
                    <div class="dialNumpadHWrapper">
                        <!-- <div class="dialNumber">
                        </div> -->
                        <div class="dialNumber">
                            <button class="callbtncss" onclick="call()">Call</button>
                        </div>
                        <!-- <div class="dialNumber">

                            <button class="dialActionButton" onclick="call()">Call</button>
                        </div> -->
                    </div>

                </div>
            </div>


            <!-- to show outgoing call -->
            <div id="calling" class="callingbox">
                <div class="incomingWrapper">
                    <div class="itemWrapper">
                        <h2>Calling</h2>
                    </div>
                    <div class="itemWrapper">
                        <img id="profileImageCA" style="padding: 30px; width: 140px; height: 140px;"
                            src="/assets/profile.png" alt="">
                    </div>
                    <div class="itemWrapper">
                        <h3 style="line-height: 0px;"><span id="otherUserNameCA"></span></h3>
                    </div>
                </div>
            </div>

            <!-- to show incommming call and accept -->
            <div id="answer">
                <div class="incomingWrapper">
                    <div class="">
                        <h2>Incomming Call</h2>
                    </div>
                    <div class="">
                        <img id="profileImageA" style="padding: 30px; width: 140px; height: 140px;"
                            src="/assets/profile.png" alt="">
                    </div>
                    <div class="">
                        <h2 style="line-height: 0px;"><span id="callerName"></span></h2>
                    </div>
                    <div style="margin-top:20px;;">
                        <!-- <button class="answerbtncc" >Answer</button> -->
                    </div>
                    <button class="accept" onclick="answer()">Accept</button> <button class="cancel" onClick="window.location.reload()">Cancel</button>
                </div>
            </div>


        </div>





        <!-- to show call in progress call -->
        <div id="inCall">
            <div class="incomingWrapper">
                <div class="itemWrapper">
                    <h3>On Call With <span id="otherUserNameC"></span></h3>

                </div>
            </div>
        </div>

        <br>

        <!-- to show local and remote video -->
        <div id="videos" style="width: 80%; margin:auto;">
            <div style="position:absolute;  bottom:20px; right:20px ">
                <video width="100px" id="localVideo" autoplay muted playsinline></video>
            </div>
            <div id="remoteVideoDiv">
                <video style="width:100% !important; height:500px" id="remoteVideo" autoplay playsinline></video>
            </div>
            <button class="btncss">Audio</button>
            <button class="btncss" id="stopVideo">Video </button>
            <button class="btncss">Screen Share</button>
            <button class="btncss" onclick="d()">Disconnect</button>
            
        </div>
      
    </div>






    <div style="flex-grow: 1;">
    </div>
    <div>
        <div style="display: flex; flex-direction: column;">


            </a>
        </div>
    </div>


    <script src="/assets/call.js"></script>
    <script>
        document.getElementById("call").style.display = "none";
        document.getElementById("userInfo").style.display = "none";
        document.getElementById("answer").style.display = "none";
        document.getElementById("inCall").style.display = "none";
        document.getElementById("calling").style.display = "none";
        document.getElementById("videos").style.display = "none";

    </script>
    <script>
        function login() {
            let userName = document.getElementById("userNameInput").value;
            myName = userName;
            document.getElementById("userName").style.display = "none";
            document.getElementById("call").style.display = "block";

            document.getElementById("nameHere").innerHTML = userName;
            document.getElementById("userInfo").style.display = "block";

            connectSocket();
        }
    </script>
    ,<script>
        videobtnstart.addEventListener('click', startLocalStream);
        videobtnstop.addEventListener('click', stopLocalStream);
    </script>
</body>

</html>